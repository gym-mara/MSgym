/*==========================================================================
                    All Run
=============================================================================*/

    /**
     * Coment Coment Coment Coment Coment Coment Coment 
     * Coment Coment Coment Coment Coment Coment Coment. 
     *
     * @package    Css
     * @subpackage  Libraries
     * @category  Libraries
     * @author    Xr8
     * @link    http://url.comapi_search_cb
     */
                 

        /*URLS NEWS*/

        /*Begin:CHECK URL*/

            //INICIO*****
            /*Asistencia*/
            api_search_cb                    = api_url + "clientes/search/action/query_cb/tipo/json";
            /*Asistencia datos*/
            api_socio_one2                   = api_url + "socio/viwer/action/one-noimg/tipo/json/filter/dos/?id_advance=";
            
        /*Begin:CHECK URL*/



            //INICIO*****
            api_inicio_all_noimg             = api_url + "inicio/viwer/action/all-noimg/tipo/json/filter/week";
            api_inicio_all_noimg_one_cb      = api_url + "inicio/viwer/action/all-noimg-one/tipo/json/filter/cb";
            api_inicio_all_noimg_one         = api_url + "inicio/viwer/action/all-noimg-one/tipo/json/filter/none/";
            api_inicio_suscripcion_all       = api_url + "inicio/viwer/action/all/tipo/json";

            api_inicio_suscripcion_update    = api_url + "inicio/update/action/update/tipo/json";

            //SOCIO *****
            api_socio_one                    = api_url + "socio/viwer/action/one-noimg/tipo/json/filter/one/?id_advance=";
            
            api_socio_two                    = api_url + "socio/viwer/action/one-noimg/tipo/json/filter/two/?id_advance=";
            api_socio_one_foto               = api_url + "socio/viwer/action/one-img/tipo/json/filter/one/?id_advance=";            
            api_socio_historial_one          = api_url + "socio/historial/action/all/tipo/json/?id_advance=";
            api_socio_asistencia_one         = api_url + "socio/asistencia/action/all/tipo/json/?id_advance=";
            api_socio_comentario             = api_url + "socio/viwer/action/comentario/tipo/json/filter/one/?id_advance=";
            //Suscripcion *****
            api_suscripcion_all              = api_url + "suscripcion/viwer/action/all/tipo/json";
            api_suscripcion_update           = api_url + "suscripcion/update/action/update/tipo/json";

            //CLIENTES *****
            api_search                       = api_url + "clientes/search/action/query/tipo/json";
            
            api_socio_asistencia             = api_url + "clientes/asistencia/action/all/tipo/json/"; 
            api_cliente_new                  = api_url + "clientes/newitem/action/one/tipo/json";
            api_cliente_update               = api_url + "clientes/updateitem/action/one/tipo/json";
            
            //EMPLEADOS *****
            api_empleado_new                  = api_url + "empleado/newitem/action/one/tipo/json";
            api_empleado_update               = api_url + "empleado/updateitem/tipo/json";
                        
            api_empleado_search               = api_url + "empleado/search/action/query/tipo/json/";
            api_empleado_info                 = api_url + "empleado/viwer/action/query/tipo/json/?id_advance=null";
            api_empleado_info_alone           = api_url + "empleado/viwer/action/query/tipo/json/?id_advance=";
            api_empleado_asistencia           = api_url + "empleado/asistencia/tipo/json";
            api_empleado_asistencia_lista     = api_url + "empleado/listaasistenciapersonal/tipo/json/";
            api_empleado_asistencia_hoy       = api_url + "empleado/asistenciahoy/tipo/json/?id_advance=";

            //ASISTENCIA *****
            api_asistencia_count             = api_url + "asistencia/viwer/action/count/tipo/json";
            api_asistencia_new_one           = api_url + "asistencia/newitems/action/one/tipo/json";

            api_clientes_info_nuevos         = api_url + "clientes/viwer/action/info-nuevos/tipo/json/filter/none";
            api_clientes_info_cumpleannos    = api_url + "clientes/viwer/action/info-cumpleannos/tipo/json/filter/none";
            api_clientes_info_pagado         = api_url + "clientes/viwer/action/info-pagado/tipo/json/filter/none";
            api_clientes_info_pendiente      = api_url + "clientes/viwer/action/info-pendientes/tipo/json/filter/none";
            api_clientes_info_inactivo       = api_url + "clientes/viwer/action/info-inactivos/tipo/json/filter/none";

            //ALMACEN *****
            api_almacen_all                  = api_url + "almacen/viwer/tipo/json/";
            api_almacen_historial            = api_url + "almacen/historial/tipo/json/?date=";
            
            api_almacen_new                  = api_url + "almacen/Newitem/tipo/json/";
            api_almacen_new_ci               = api_url + "almacen/Newitemci/tipo/json/";

            api_almacen_one                  = api_url + "almacen/viwerone/tipo/json/?id_advance=";
            api_almacen_update               = api_url + "almacen/update/tipo/blank/";
            api_almacen_venta_vapor          = api_url + "almacen/venta/tipo/json/transferencia/vapor/";
            
            //PRODUCTOS *****
            api_productos_all                = api_url + "productos/viwer/tipo/json/";
            api_productos_all2               = api_url + "productos/viwerall/tipo/json/";
            api_productos_update             = api_url + "productos/update/tipo/json";

            api_productos_search             = api_url + "almacen/searchtransferencia/tipo/json/";
            api_productos_historial          = api_url + "productos/historial/tipo/json/?date=";
            
            //TICKET 
            api_ticket_new                   = api_url + "ticket/newitem/tipo/json/"; 
            api_ticket_folio                 = api_url + "ticket/folio/tipo/json/"; 

            //VENTAS//                                             
            api_ventas_vapor                   = api_url + "ventas/viwer/tipo/json/action/vapor";
            api_ventas_membresia               = api_url + "ventas/viwer/tipo/json/action/membresia";
            api_ventas_productos               = api_url + "ventas/viwer/tipo/json/action/productos";
            api_ventas_servicios               = api_url + "ventas/viwer/tipo/json/action/servicios";
            api_ventas_all                     = api_url + "ventas/viwer/tipo/json/action/all";
            api_ventas_todo                    = api_url + "ventas/viwer/tipo/json/action/todo";   
            api_ventas_todo_count              = api_url + "ventas/viwer/tipo/json/action/todogroup";   
            
            //
            api_ventas_corte                    = api_url + "ventas/viwer/tipo/json/action/all_sum";
            
            api_ventas_folio                    = api_url + "ventas/viwer/tipo/json/action/folio";
            api_ventas_folio2                    = api_url + "ticket/folio2/tipo/json/action/folio";
            api_new_ticket_corte                 = api_url + "ticket/newitemcorte/tipo/json/";


            api_new_salidadinero                = api_url + "ticket/newitemdos/tipo/json/";
            api_new_entradadinero                = api_url + "ticket/newitemtres/tipo/json/";


/* ==========================================================================
                    Menu
    
    /**
     * Coment Coment Coment Coment Coment Coment Coment 
     * Coment Coment Coment Coment Coment Coment Coment. 
     *
     * @package    Css
     * @subpackage  Libraries
     * @category  Libraries
     * @author    Xr8
     * @link    http://url.com
     */    
    $(document).on("ready",Main);
    console.debug('Run: Mian');
    
    $(document).on("ready",DashboardSearch);
    console.debug('Run: Dashboard Search');
    
    /***************************************************    
    *                      Sub Menu                   * 
    ***************************************************/
    /*
    *
    *
    */    
    /*    
        run ->DashboardClientesAsistencia()
            -> (a) hide asistencia-info & autocomplete a-i-codebar
            -> (b) setTimeout & load info socio
            -> (c) hide asistencia-info
            -> (d) c-asistencia click
            -> (e) modal
            -> (f) setTimeout ajax
    */    

    function Main(){
        $(".j-hidden").hide()
        
        tipo = $("#tipo_trabajdor").val()

        if (tipo == "cajero") {
            $(".tipo-cajera").hide()
            }
        
        if (tipo == "almacen") {
            $(".tipo-almacen").hide()
            }

        }       
        

    //BENIG: Dashboard
    function DashboardSearch(){
        console.log('Begin: Search');
            $("#buscar").click(function() {
                $("#buscar").val("")
            })
            
            $("#buscar").autocomplete({
                minLength: 4,
                delay: 400,
                source: function(req, add){  
        
                // XMLHttpRequest --->
                    $.getJSON(api_search, req, function(data) {  
                        var suggestions = [] ;  
                            $.each(data, function(i,val){  
                                suggestions.push({
                                    id_advance: val.id_advance,
                                    nombre: val.nombre,
                                    value: val.nombre
                                });
                            });  
                        add(suggestions);  
                    });  

                },
                select: function (event, ui) {
                    console.log("socio id advance: " + ui.item.id_advance);
                    window.location.assign(app_url + "socio/?id_advance=" +  ui.item.id_advance)
                }
            });         

        console.log('End: Search');                               
        }  
    
    function webCam64(){
        console.info('Begin: webCam64')
        //----->         
            $("#webcamResult").hide();
            $("#image").empty();

            $("#webcam").scriptcam({
              showMicrophoneErrors:false,
              onError:onError,
              cornerRadius:20,
              cornerColor:'e3e5e2',
              onWebcamReady:onWebcamReady,
              uploadImage:'upload.gif',
              onPictureAsBase64:base64_tofield_and_image
            });

            $("#btn4").hide();

            $("#btn3").click(function() {
                base64_tofield();
                base64_toimage();
                $("#webcamResult").show();
                $("#webcam").hide();

                $("#btn4").fadeIn();
                $("#btn3").fadeOut();


            });

            $("#btn4").click(function() {
                $("#webcamResult").hide();
                $("#webcam").show();

                $("#btn3").fadeIn();
                $("#btn4").fadeOut();
            });

            function base64_tofield() {
                $('#formfield').val($.scriptcam.getFrameAsBase64())
                }
            function base64_toimage() {
                $('#image').attr("src","data:image/png;base64,"+$.scriptcam.getFrameAsBase64())
                }
            function base64_tofield_and_image(b64) {
                $('#formfield').val(b64)
                $('#image').attr("src","data:image/png;base64,"+b64)
                }
            function changeCamera() {
                $.scriptcam.changeCamera($('#cameraNames').val())
                }
            function onError(errorId,errorMsg) {
                $( "#btn1" ).attr( "disabled", true )
                $( "#btn2" ).attr( "disabled", true )
                    alert(errorMsg)
                }     
            function onWebcamReady(cameraNames,camera,microphoneNames,microphone,volume) {
                $.each(cameraNames, function(index, text) {
                    $('#cameraNames').append( $('<option></option>').val(index).html(text) )
                }) 
                $('#cameraNames').val(camera)
                }
        //----->  
        console.info('End: webCam64')
        }
    
    function webCam642(){
        console.info('Begin: webCam64')
        //----->         
            $("#webcamResult2").hide();
            $("#image2").empty();

            $("#webcam2").scriptcam({
              showMicrophoneErrors:false,
              onError:onError,
              cornerRadius:20,
              cornerColor:'e3e5e2',
              onWebcamReady:onWebcamReady,
              uploadImage:'upload.gif',
              onPictureAsBase64:base64_tofield_and_image
            });

            $("#btn42").hide();

            $("#btn32").click(function() {
                base64_tofield();
                base64_toimage();
                $("#webcamResult2").show();
                $("#webcam2").hide();

                $("#btn42").fadeIn();
                $("#btn32").fadeOut();
            });

            $("#btn42").click(function() {
                $("#webcamResult2").hide();
                $("#webcam2").show();

                $("#btn32").fadeIn();
                $("#btn42").fadeOut();
            });

            function base64_tofield() {
                $('#formfield2').val($.scriptcam.getFrameAsBase64())
                }
            function base64_toimage() {
                $('#image2').attr("src","data:image/png;base64,"+$.scriptcam.getFrameAsBase64())
                }
            function base64_tofield_and_image(b64) {
                $('#formfield2').val(b64)
                $('#image2').attr("src","data:image/png;base64,"+b64)
                }
            function changeCamera() {
                $.scriptcam.changeCamera($('#cameraNames2').val())
                }
            function onError(errorId,errorMsg) {
                $( "#btn12" ).attr( "disabled", true )
                $( "#btn22" ).attr( "disabled", true )
                    alert(errorMsg)
                }     
            function onWebcamReady(cameraNames,camera,microphoneNames,microphone,volume) {
                $.each(cameraNames, function(index, text) {
                    $('#cameraNames2').append( $('<option></option>').val(index).html(text) )
                }) 
                $('#cameraNames2').val(camera)
                }
        //----->  
        console.info('End: webCam64')
        }
    
    function webCam643(){
        console.info('Begin: webCam64')
        //----->         
            $("#webcamResult3").hide();
            $("#image3").empty();

            $("#webcam3").scriptcam({
              showMicrophoneErrors:false,
              onError:onError,
              cornerRadius:20,
              cornerColor:'e3e5e2',
              onWebcamReady:onWebcamReady,
              uploadImage:'upload.gif',
              onPictureAsBase64:base64_tofield_and_image
            });

            $("#btn43").hide();

            $("#btn33").click(function() {
                base64_tofield();
                base64_toimage();
                $("#webcamResult3").show();
                $("#webcam3").hide();

                $("#btn43").fadeIn();
                $("#btn33").fadeOut();
            });

            $("#btn43").click(function() {
                $("#webcamResult3").hide();
                $("#webcam3").show();

                $("#btn33").fadeIn();
                $("#btn43").fadeOut();
            });

            function base64_tofield() {
                $('#formfield3').val($.scriptcam.getFrameAsBase64())
                }
            function base64_toimage() {
                $('#image3').attr("src","data:image/png;base64,"+$.scriptcam.getFrameAsBase64())
                }
            function base64_tofield_and_image(b64) {
                $('#formfield3').val(b64)
                $('#image3').attr("src","data:image/png;base64,"+b64)
                }
            function changeCamera() {
                $.scriptcam.changeCamera($('#cameraNames3').val())
                }
            function onError(errorId,errorMsg) {
                $( "#btn13" ).attr( "disabled", true )
                $( "#btn23" ).attr( "disabled", true )
                    alert(errorMsg)
                }     
            function onWebcamReady(cameraNames,camera,microphoneNames,microphone,volume) {
                $.each(cameraNames, function(index, text) {
                    $('#cameraNames3').append( $('<option></option>').val(index).html(text) )
                }) 
                $('#cameraNames3').val(camera)
                }
        //----->  
        console.info('End: webCam64')
        } 
    
    function htmlEncode(html){
        return document.createElement( 'a' ).appendChild( 
        document.createTextNode( html ) ).parentNode.innerHTML;
        }

    function randomString(len, charSet) {
        charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        var randomString = '';
        for (var i = 0; i < len; i++) {
            var randomPoz = Math.floor(Math.random() * charSet.length);
            randomString += charSet.substring(randomPoz,randomPoz+1);
        }
        return randomString;
        }

    /***************************************************    
    *                                                  * 
    ***************************************************/
    /*
    *
    *
    */
    //BENIG: 
    function error_net(jqXHR, textStatus ){
        if (jqXHR.status === 0){
            fail_txt = "Not connection Verify Network [   ]. " + textStatus;
            }else if (jqXHR.status == 200){
                fail_txt = "Requested page Ok [200]. " + textStatus;
                }else if (jqXHR.status == 404){
                    fail_txt = "Requested page not found [404]. " + textStatus;
                    }else if (jqXHR.status == 500){
                        fail_txt = "Internal Server Error [500]. " + textStatus;
                        }else if (exception === 'parsererror'){
                            fail_txt = "Requested JSON parse failed [   ]. " + textStatus;
                            }else if (exception === 'timeout'){
                                fail_txt = "Time out error [   ]. " + textStatus;
                                }else if (exception === 'abort'){
                                    fail_txt = "Ajax request aborted [   ]. " + textStatus;
                                    }else{
                                        fail_txt = "Uncaught Error [   ]. " + jqXHR.responseText;
                                        }  
        return fail_txt;
        }     

    /***************************************************    
    *                                                  * 
    ***************************************************/
    /*
    *
    *
    */
    //BENIG: 
    function reloadon(tiempo){
        setTimeout(function(){
            javascript:location.reload();
            },tiempo);
        }        

    /*
    * Inicializacion en español para la extension 'UI date picker' para jQuery.
    *
    *
    *
    *
    *
    *
    */        
        $.datepicker.regional['es'] = {
            closeText: 'Cerrar',
            prevText: '&#x3c;Ant',
            nextText: 'Sig&#x3e;',
            currentText: 'Hoy',
            monthNames: ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],
            monthNamesShort: ['Ene','Feb','Mar','Abr','May','Jun','Jul','Ago','Sep','Oct','Nov','Dic'],
            dayNames: ['Domingo','Lunes','Martes','Mi&eacute;rcoles','Jueves','Viernes','S&aacute;bado'],
            dayNamesShort: ['Dom','Lun','Mar','Mi&eacute;','Juv','Vie','S&aacute;b'],
            dayNamesMin: ['Do','Lu','Ma','Mi','Ju','Vi','S&aacute;'],
            weekHeader: 'S',
            dateFormat: 'yy-mm-dd',
            firstDay: 1,
            isRTL: false,
            showMonthAfterYear: false,
            yearSuffix: ''
            };
        $.datepicker.setDefaults($.datepicker.regional['es']);
        //----> Fin

        d            = new Date();
        var date     = d.getFromFormat('yyyy-mm-dd');
        var datetime = d.getFromFormat('yyyy-mm-dd hh:ii:ss');

        $("#gymh2o_date").val(date);
        $("#gymh2o_date_now").val(datetime);
        $(".ticket-time").html(datetime);

    //end ready
//http://www.fullhdwpp.com/wp-content/uploads/Row-boat-on-empty-sea_www.FullHDWpp.com_.jpg

